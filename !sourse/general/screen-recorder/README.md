# [How to Make a Screen Recorder in Python](https://www.thepythoncode.com/article/make-screen-recorder-python)
To run this:
- `pip3 install -r requirements.txt`
- `python3 screen_recorder.py`
##
# [[] / []]()
Запись экрана позволяет создавать демонстрационные видеоролики, записывать игровые достижения и создавать видео, которыми можно делиться в Интернете в социальных сетях. Существует много промышленного программного обеспечения, которое может помочь вам сделать это очень легко. В этом уроке вы узнаете, как создать свой собственный простой экранный рекордер на Python, который вы можете дополнительно расширить для своих собственных потребностей.

Из этого туториала Вы узнаете о записи всего экрана. Если вы хотите записать определенное окно, то проверьте этот учебник, так как это именно то, что вам нужно.

Связанные с: Как использовать стеганографию для скрытия секретных данных в изображениях в Python.

Давайте начнем, во-первых, установим необходимые зависимости для этого учебника:

pip3 install numpy opencv-python pyautogui
Процесс работы с этим учебником выглядит следующим образом:

Сделайте снимок экрана с помощью pyautogui.
Преобразуйте этот снимок экрана в массив numpy.
Запишите этот массив numpy в файл с правильным форматом с помощью видеоработницы в OpenCV.
Импорт необходимых модулей:

import cv2
import numpy as np
import pyautogui
Давайте инициализируем формат, который мы будем использовать для записи нашего видеофайла (с именем "output.avi"):

# display screen resolution, get it using pyautogui itself
SCREEN_SIZE = tuple(pyautogui.size())
# define the codec
fourcc = cv2.VideoWriter_fourcc(*"XVID")
# frames per second
fps = 12.0
# create the video write object
out = cv2.VideoWriter("output.avi", fourcc, fps, (SCREEN_SIZE))
# the time you want to record in seconds
record_seconds = 10
Мы получаем разрешение экрана от функции pyautogui.size(), которая возвращает высоту и ширину экрана в виде двухцелочисленного кортежа.

fourcc - это библиотека видеокодеков, которую OpenCV будет использовать для записи видеофайла, мы указали XVID здесь. Мы также устанавливаем FPS на 12.0 и передаем эти параметры в cv2. Объект VideoWriter().

Record_seconds - это количество секунд, которое вы хотите записать, если вы хотите записать до нажатия кнопки «q», то просто установите это большое значение.

Теперь нам нужно продолжать делать скриншоты и записывать в файл в цикле, пока не пройдут секунды или пользователь не нажмет кнопку «q», вот основной цикл для этого:

for i in range(int(record_seconds * fps)):
    # make a screenshot
    img = pyautogui.screenshot()
    # convert these pixels to a proper numpy array to work with OpenCV
    frame = np.array(img)
    # convert colors from BGR to RGB
    frame = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
    # write the frame
    out.write(frame)
    # show the frame
    cv2.imshow("screenshot", frame)
    # if the user clicks q, it exits
    if cv2.waitKey(1) == ord("q"):
        break

# make sure everything is closed when exited
cv2.destroyAllWindows()
out.release()
Во-первых, мы используем функцию screenshot(), которая возвращает объект изображения, поэтому нам нужно преобразовать его в правильный массив numpy. После этого нам нужно преобразовать этот кадр в RGB, потому что OpenCV использует BGR по умолчанию.

Цикл завершится, как только пройдут секунды или если вы нажмете кнопку «q». Обратите внимание, что если вы увеличите FPS, вы можете увидеть, что видео немного ускоряется, потому что ваш процессор не может справиться с этой скоростью.

Если вы не хотите видеть свою запись в режиме реального времени, просто закомментируйте строку cv2.imshow(), и она ничего не покажет, пока запись не будет завершена.

Как упоминалось в официальной документации pyautogui, вы также можете записывать только области вашего экрана, передавая аргумент ключевого слова region, который представляет собой кортеж из четырех целых чисел, представляющий верхнюю, левую, ширину и высоту области для захвата, вот как это делается:

img = pyautogui.screenshot(region=(0, 0, 300, 400))
После того, как вы закончите с записью, просто нажмите «q», это уничтожит окно и закончит запись в файл, попробуйте!

Хорошо, есть бесконечные идеи, которые вы можете использовать, чтобы расширить это. Например, вы можете объединить это с аудиомагнитофоном, и вы придумаете инструмент Python, который записывает ваш экран и голос одновременно, вам нужно будет использовать поток, который записывает аудио, и другой для экранного рекордера. Или вы можете добавить аудиофайл в свою видеозапись.

Или вы можете создать сочетания клавиш, которые запускают, приостанавливают и останавливают запись, этот учебник может вам помочь.